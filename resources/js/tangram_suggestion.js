/* Copyright (c) 2010 Baidu, Inc. All Rights Reserved */var baidu=baidu||{version:"1-1-0"};baidu.ui=baidu.ui||{},baidu.suggestion=baidu.ui.suggestion=baidu.ui.suggestion||{},baidu.event=baidu.event||{},baidu.event.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},baidu.dom=baidu.dom||{},baidu.dom.g=function(a){if("string"==typeof a||a instanceof String)return document.getElementById(a);if(a&&a.nodeName&&(a.nodeType==1||a.nodeType==9))return a;return null},baidu.g=baidu.G=baidu.dom.g,baidu.event._unload=function(){var a=baidu.event._listeners,b=a.length,c=!!window.removeEventListener,d,e;while(b--)d=a[b],e=d[0],e.removeEventListener?e.removeEventListener(d[1],d[3],!1):e.detachEvent&&e.detachEvent("on"+d[1],d[3]);c?window.removeEventListener("unload",baidu.event._unload,!1):window.detachEvent("onunload",baidu.event._unload)},window.attachEvent?window.attachEvent("onunload",baidu.event._unload):window.addEventListener("unload",baidu.event._unload,!1),baidu.event._listeners=baidu.event._listeners||[],baidu.event.on=function(a,b,c){b=b.replace(/^on/i,""),"string"==typeof a&&(a=baidu.dom.g(a));var d=function(b){c.call(a,b)},e=baidu.event._listeners;e[e.length]=[a,b,c,d],a.attachEvent?a.attachEvent("on"+b,d):a.addEventListener&&a.addEventListener(b,d,!1);return a},baidu.on=baidu.event.on,baidu.ui.suggestion._InputWatcher=function(a,b,c){var d=this,e,f=0,g="",h="",i="",j,k=!1,l=!1,m=!1;b.setAttribute("autocomplete","off"),baidu.on(b,"keydown",function(b){m||(a.call("start"),m=!0),b=b||window.event;var c;switch(b.keyCode){case 9:c="tab";break;case 27:c="esc";break;case 13:c="enter",baidu.event.preventDefault(b);break;case 38:c="up",baidu.event.preventDefault(b);break;case 40:c="down"}c&&a.call("key_"+c,h)}),baidu.on(b,"mousedown",function(){m||(a.call("start"),m=!0),b.value&&a.call("need_data",b.value)}),baidu.on(b,"beforedeactivate",function(){k&&(window.event.cancelBubble=!0,window.event.returnValue=!1)}),a.listen("start",function(){i=b.value,f=setInterval(function(){if(!l){baidu.G(b)==null&&suggestion.dispose();var c=b.value;c==g&&c!=""&&c!=i&&c!=j?e==0&&(e=setTimeout(function(){a.call("need_data",c)},100)):(clearTimeout(e),e=0,c==""&&g!=""&&(j="",a.call("all_clear")),g=c,c!=j&&(h=c),i!=b.value&&(i=""))}},10)}),a.listen("pick_word",function(a){k&&setTimeout(function(){b.blur()},500),b.value=j=a,k&&b.focus()}),a.listen("mousedown_item",function(a){k=!0,l=!0,setTimeout(function(){l=!1,k=!1},500)}),a.listen("confirm_item",function(a,b,c,d){l=!1,h=g=c});return{getValue:function(){return b.value},dispose:function(){clearInterval(f)}}},function(){var a={},b=function(a){var b={};a.listen=function(c,f){b[c]=b[c]||[];var g=0;while(g<b[c].length&&b[c][g]!=f)g++;g==b[c].length&&b[c].push(f);return a},a.call=function(c){if(b[c])for(var f=0;f<b[c].length;f++)b[c][f].apply(this,Array.prototype.slice.call(arguments,1));return a}};a.extend=function(a){new b(a);return a},a.extend(a),baidu.suggestion._Central=a}(),baidu.ui.suggestion._Data=function(a,b){var c=this,d={};a.listen("response_data",function(b,c){d[b]=c,a.call("data_ready",b,c)}),a.listen("need_data",function(c){typeof d[c]=="undefined"?b(c):a.call("data_ready",c,d[c])});return{}},baidu.dom._styleFixer=baidu.dom._styleFixer||{},baidu.dom._styleFilter=baidu.dom._styleFilter||[],baidu.dom._styleFilter.filter=function(a,b,c){for(var d=0,e=baidu.dom._styleFilter,f;f=e[d];d++)if(f=f[c])b=f(a,b);return b},baidu.string=baidu.string||{},baidu.string.toCamelCase=function(a){return String(a).replace(/[-_]\D/g,function(a){return a.charAt(1).toUpperCase()})},baidu.dom.getStyle=function(a,b){var c=baidu.dom;a=c.g(a),b=baidu.string.toCamelCase(b);var d=a.style[b];if(d)return d;var e=c._styleFixer[b],f=a.currentStyle||(baidu.browser.ie?a.style:getComputedStyle(a,null));d="object"==typeof e&&e.get?e.get(a,f):f[e||b];if(e=c._styleFilter)d=e.filter(b,d,"get");return d},baidu.getStyle=baidu.dom.getStyle,baidu.object=baidu.object||{},baidu.object.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},baidu.extend=baidu.object.extend,baidu.browser=baidu.browser||{},/msie (\d+\.\d)/i.test(navigator.userAgent)&&(baidu.ie=baidu.browser.ie=parseFloat(RegExp.$1)),baidu.dom.getDocument=function(a){a=baidu.dom.g(a);return a.nodeType==9?a:a.ownerDocument||a.document},/opera\/(\d+\.\d)/i.test(navigator.userAgent)&&(baidu.browser.opera=parseFloat(RegExp.$1)),baidu.browser.isWebkit=/webkit/i.test(navigator.userAgent),baidu.browser.isGecko=/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent),baidu.browser.isStrict=document.compatMode=="CSS1Compat",baidu.dom.getPosition=function(a){var c=baidu.dom.getDocument(a),d=baidu.browser;a=baidu.dom.g(a);var e=d.isGecko>0&&c.getBoxObjectFor&&baidu.dom.getStyle(a,"position")=="absolute"&&(a.style.top===""||a.style.left===""),f={left:0,top:0},g=d.ie&&!d.isStrict?c.body:c.documentElement;if(a==g)return f;var h=null,i;if(a.getBoundingClientRect)i=a.getBoundingClientRect(),f.left=Math.floor(i.left)+Math.max(c.documentElement.scrollLeft,c.body.scrollLeft),f.top=Math.floor(i.top)+Math.max(c.documentElement.scrollTop,c.body.scrollTop),f.left-=c.documentElement.clientLeft,f.top-=c.documentElement.clientTop,d.ie&&!d.isStrict&&(f.left-=2,f.top-=2);else if(c.getBoxObjectFor&&!e){i=c.getBoxObjectFor(a);var j=c.getBoxObjectFor(g);f.left=i.screenX-j.screenX,f.top=i.screenY-j.screenY}else{h=a;do{f.left+=h.offsetLeft,f.top+=h.offsetTop;if(d.isWebkit>0&&baidu.dom.getStyle(h,"position")=="fixed"){f.left+=c.body.scrollLeft,f.top+=c.body.scrollTop;break}h=h.offsetParent}while(h&&h!=a);if(d.opera>0||d.isWebkit>0&&baidu.dom.getStyle(a,"position")=="absolute")f.top-=c.body.offsetTop;h=a.offsetParent;while(h&&h!=c.body){f.left-=h.scrollLeft;if(!b.opera||h.tagName!="TR")f.top-=h.scrollTop;h=h.offsetParent}}return f},baidu.ui=baidu.ui||{},baidu.suggestion=baidu.ui.suggestion=baidu.ui.suggestion||{},baidu.ui.suggestion._Div=function(a,b,c,d,e){function v(b){var d=b;return function(){a.call("confirm_item",c.getValue(),h[d],d,i[d]);var b=c.getValue();t(h[d]),e.onpick(b,d,h[d],i[d]),e.onconfirm(c.getValue(),d,h[d],i[d]),u()}}function u(){if(m.style.display=="none")return null;n.style.display=m.style.display="none",e.onhide()}function t(b){var c=h&&typeof b=="number"&&typeof h[b]!="undefined"?h[b]:b;a.call("pick_word",c)}function s(a){p(),l[a].className=k+"mo"}function r(){var a=q();e.onhighlight(c.getValue(),a[0],a[1],a[2])}function q(){if(l&&m.style.display!="none")for(var a=0;a<l.length;a++)if(l[a].className==k+"mo")return[a,h[a],i[a]];return[-1,""]}function p(){for(var a=0;a<l.length;a++)l[a].className=k+"ml"}function o(b,d){if(m.style.display=="none")a.call("need_data",c.getValue());else{var f=q()[0];p();if(b){if(f==0){t(d),f--;return}f==-1&&(f=h.length),f--}else{if(f==h.length-1){t(d),f=-1;return}f++}s(f),r();var g=c.getValue();t(f);var i=q();e.onpick(g,i[0],i[1],i[2])}}var f=this,g,h,i,j,k=e.class_prefix,l,m=document.createElement("DIV");m.id=k+(new Date).getTime(),m.className=k+"wpr",m.style.display="none";var n=document.createElement("IFRAME");n.src="https://passport.baidu.com/img/passport/img/0.gif",n.className=k+"sd",n.style.display="none",n.style.position="absolute",n.style.borderWidth="0px",e.apd_body?document.body.appendChild(m):b.parentNode.appendChild(m),m.parentNode.insertBefore(n,m),a.listen("start",function(){baidu.on(document,"mousedown",function(a){a=a||window.event;var c=a.target||a.srcElement;if(c!=b){while(c=c.parentNode)if(c==m)return;u()}}),baidu.on(window,"blur",u)}),a.listen("key_enter",function(){var a=q(),b=a[0]==-1?j:a[1];e.onconfirm(c.getValue(),a[0],b,a[2]),u()}),a.listen("key_up",function(a){o(1,a)}),a.listen("key_down",function(a){o(0,a)}),a.listen("key_tab",u),a.listen("key_esc",u),a.listen("all_clear",u),a.listen("data_ready",function(b,c){j=c,h=[],i=[];for(var e=0,g=c.length;e<g;e++)typeof c[e].input!="undefined"?(h[e]=c[e].input,i[e]=c[e].selection):i[e]=h[e]=c[e];if(h.length!=0){l=d(m,i,f);for(var e=0,g=l.length;e<g;e++)baidu.on(l[e],"mouseover",function(){p(),this.className=k+"mo",r()}),baidu.on(l[e],"mouseout",p),baidu.on(l[e],"mousedown",function(b){a.call("mousedown_item");if(!baidu.ie){b.stopPropagation(),b.preventDefault();return!1}}),baidu.on(l[e],"click",v(e))}else u()});return{element:m,shade:n,pick:t,highlight:s,hide:u,dispose:function(){m.parentNode.removeChild(m)}}},baidu.ui.suggestion._Suggestion=function(a,b){var c=this,d=baidu.ui.suggestion._MessageDispatcher;c.options={onpick:function(){},onconfirm:function(){},onhighlight:function(){},onhide:function(){},view:null,getData:!1,prepend_html:"",append_html:"",class_prefix:"tangram_sug_",apd_body:!1},baidu.extend(c.options,b);if(!(a=baidu.G(a)))return null;c.inputElement=a,a.id?c.options._inputId=a.id:a.id=c.options._inputId=c.options.class_prefix+"ipt"+(new Date).getTime(),c._adjustPos=function(b){var d=h.element,e=h.shade,f=document,g=f.compatMode=="BackCompat"?f.body:f.documentElement,j=g.clientHeight,k=g.clientWidth;if(d.style.display!="none"||!b){var l=baidu.dom.getPosition(a),m=[l.top+a.offsetHeight-1,l.left,a.offsetWidth];m=typeof c.options.view=="function"?c.options.view(m):m,d.style.display=e.style.display="block",e.style.top=m[0]+"px",e.style.left=m[1]+"px",e.style.width=m[2]+"px";var n=parseFloat(baidu.getStyle(d,"marginTop"))||0,o=parseFloat(baidu.getStyle(d,"marginLeft"))||0;d.style.top=m[0]-n+"px",d.style.left=m[1]-o+"px";if(baidu.ie&&document.compatMode=="BackCompat")d.style.width=m[2]+"px";else{var p=parseFloat(baidu.getStyle(d,"borderLeftWidth"))||0,q=parseFloat(baidu.getStyle(d,"borderRightWidth"))||0,r=parseFloat(baidu.getStyle(d,"marginRight"))||0;d.style.width=m[2]-p-q-o-r+"px"}e.style.height=d.offsetHeight+"px",(j!=g.clientHeight||k!=g.clientWidth)&&c._adjustPos()}},c._draw=function(a,b){var d=[],e=document.createElement("TABLE");e.cellPadding=2,e.cellSpacing=0;var f=document.createElement("TBODY");e.appendChild(f);for(var g=0,h=b.length;g<h;g++){var i=f.insertRow(-1);d.push(i);var j=i.insertCell(-1);j.innerHTML=b[g]}var k=document.createElement("DIV");k.className=c.options.class_prefix+"pre",k.innerHTML=c.options.prepend_html;var l=document.createElement("DIV");l.className=c.options.class_prefix+"app",l.innerHTML=c.options.append_html,a.innerHTML="",a.appendChild(k),a.appendChild(e),a.appendChild(l),c._adjustPos();return d};var e=baidu.suggestion._Central.extend(c),f=new baidu.ui.suggestion._Data(e,c.options.getData),g=new baidu.ui.suggestion._InputWatcher(e,a,h),h=new baidu.ui.suggestion._Div(e,a,g,c._draw,c.options);e.listen("start",function(){setInterval(function(){var b=h.element;b.offsetWidth!=0&&a.offsetWidth!=b.offsetWidth&&c._adjustPos()},100),baidu.on(window,"resize",function(){c._adjustPos(!0)})});return{pick:h.pick,hide:h.hide,highlight:h.highlight,getElement:function(){return h.element},getData:c.options.getData,giveData:function(a,b){e.call("response_data",a,b)},dispose:function(){h.dispose(),g.dispose()}}},baidu.ui.suggestion.create=function(a,b){return new baidu.ui.suggestion._Suggestion(a,b)}